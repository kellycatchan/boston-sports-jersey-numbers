<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto+Condensed"
    rel="stylesheet"
  />
  <title>Boston Sports Jerseys Game</title>
  
  <style>
    :root {
      --bg: #ffffff;
      --card: #fbf1e7;
      --card-2: #fbf1e7;
      --accent: #bb2525;
      --accent-2: #bb2525;
      --warn: #bb2525;
      --bad: #bb2525;
      --text: #1a1a1a;
      --muted: #1a1a1a;
      --shadow: 0 4px 6px rgba(0,0,0,.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Roboto Condensed', sans-serif;
      background: #ffffff;
      color: var(--text);
      display: grid;
      place-items: center;
    }
    .app {
      width: min(1100px, 95vw);
    }
    header {
      display: flex; align-items: center; justify-content: space-between; gap: 16px;
      margin-bottom: 18px;
    }
    h1 { font-size: 1.8rem; margin: 0; letter-spacing: .3px; padding-bottom: 10px; }
    .subtitle { color: var(--muted); font-size: 14px; }

    .topbar { display:flex; gap:10px; align-items:center; flex-wrap: wrap; }
    .btn {
      border: 0; cursor: pointer; padding: 10px 14px; border-radius: 999px;
      background: #bb2525; 
      color: white; letter-spacing: .2px; box-shadow: var(--shadow);
      font-family: 'Roboto Condensed';
    }
    .btn:disabled { opacity: .55; cursor: not-allowed; }

    .statusbar { display:flex; gap:14px; align-items:center; }
    .pill { padding: 8px 12px; border-radius: 999px; background: #0e1627; border: 1px solid #1e293b; color: #cbd5e1; font-size: 13px;}

    .banner { margin: 14px 0 18px; padding: 12px 14px; border-radius: var(--radius);
      background: #f1f1f1; border:1px solid #1a1a1a; color: #1a1a1a; display:block; }
    .banner.show { display:block; }
    .banner.good { border-color: #1a1a1a; background: #f1f1f1; color:#1a1a1a; }
    .banner.bad { border-color: #1a1a1a; background: #f1f1f1; color:#1a1a1a; }
    .banner.warn { border-color: #1a1a1a; background: #f1f1f1; color:#1a1a1a; }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    @media (max-width: 720px) { .grid { grid-template-columns: repeat(4, 1fr); } }

    .card {
      border-radius: var(--radius);
      background: var(--card);
      border: 1px solid #1e293b;
      padding: 16px 14px; min-height: 86px;
      box-shadow: var(--shadow);
      cursor: pointer; user-select: none;
      display:flex; flex-direction: column; justify-content: center; align-items: center; text-align:center;
      transition: transform .08s ease, outline .2s ease, background .2s ease, border-color .2s ease;
      position: relative; overflow: hidden;
    }
    .card .name { font-size: 14px; color: var(--text); font-weight: bold; line-height: 1; font-family:'Roboto Condensed';}
    .card .team { font-size: 12px; color: var(--text); margin-top: 5px; font-family:'Roboto Condensed'; }

    .card:hover { transform: translateY(-1px); }
    .card.selected { outline: 3px solid var(--accent); border-color: #bb2525; }
    .card.locked { background: #bb2525; border-color: #bb2525; cursor: default; color: #ffffff; }
    .card.locked .name {color: #ffffff; }
    .card.locked .team {color: #ffffff; }

    .found-wrap { margin-top: 18px; display: grid; gap: 10px; }
    .found-row { display:flex; align-items:center; gap: 10px; background:#bb2525; border-radius: var(--radius); padding: 10px 12px; color:#ffffff}
    .label { font-weight: bold; font-size: 1rem; color:#ffffff; }

  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Can you match these Boston sports players by their jersey numbers?</h1>
        <div class="subtitle">Find 4 groups of players who share the <strong>same jersey number</strong>  — at least at one point in their career — across the Celtics, Bruins, Patriots, and Red Sox. Each grouping has 1 player from each team.</div>
      </div>
      <div class="topbar">
        <button class="btn" id="shuffleBtn" title="Shuffle the board">Shuffle</button>
        <button class="btn" id="resetBtn" title="Restart the puzzle">Restart</button>
      </div>
    </header>

    <div class="statusbar">
      <div class="pill" id="progress">0/4 groups found</div>
      <div class="pill" id="selectionPill">0 selected</div>
      <button id="submitBtn" class="btn" disabled>Submit</button>
    </div>

    <div class="banner" id="banner"></div>

    <main class="grid" id="grid"></main>

    <section class="found-wrap" id="found"></section>

  </div>

  <script>
    // --- Data ---------------------------------------------------------------
    const GROUPS = [
      {
        number: 33,
        players: [
          { name: "LARRY BIRD", team: "CELTICS" },
          { name: "ZDENO CHÁRA", team: "BRUINS" },
          { name: "KEVIN FAULK", team: "PATRIOTS" },
          { name: "JASON VARITEK", team: "RED SOX" },
        ],
      },
      {
        number: 4,
        players: [
          { name: "BOBBY ORR", team: "BRUINS" },
          { name: "JRUE HOLIDAY", team: "CELTICS" },
          { name: "ADAM VINATIERI", team: "PATRIOTS" },
          { name: "JOE CRONIN", team: "RED SOX" },
        ],
      },
      {
        number: 8,
        players: [
          { name: "STEFON DIGGS", team: "PATRIOTS" },
          { name: "CAM NEELY", team: "BRUINS" },
          { name: "KRISTAPS PORZIŅĠIS", team: "CELTICS" },
          { name: "CARL YASTRZEMSKI", team: "RED SOX" },
        ],
      },
      {
        number: 9,
        players: [
          { name: "KAYSHON BOUTTE", team: "PATRIOTS" },
          { name: "DERRICK WHITE", team: "CELTICS" },
          { name: "JOHNNY BUCYK", team: "BRUINS" },
          { name: "TED WILLIAMS", team: "RED SOX" },
        ],
      },
    ];

    // Flatten to a 16-card deck
    const ALL_PLAYERS = GROUPS.flatMap(g => g.players.map(p => ({ ...p, number: g.number })));

    // --- State --------------------------------------------------------------
    let deck = [];
    let selected = new Set(); // store indexes in deck
    let solvedGroups = []; // {number, players[]}

    // --- Elements -----------------------------------------------------------
    const grid = document.getElementById('grid');
    const banner = document.getElementById('banner');
    const progress = document.getElementById('progress');
    const selectionPill = document.getElementById('selectionPill');
    const found = document.getElementById('found');
    const submitBtn = document.getElementById('submitBtn');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');

    // --- Utils --------------------------------------------------------------
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function setBanner(type, text) {
      banner.className = `banner show ${type || ''}`.trim();
      banner.textContent = text;
      if (type) {
        // Auto hide after 1800ms for feedback banners
        clearTimeout(setBanner._t);
        setBanner._t = setTimeout(() => banner.classList.remove('show'), 1800);
      }
    }

    function updatePills() {
      progress.textContent = `${solvedGroups.length}/4 groups found`;
      selectionPill.textContent = `${selected.size} selected`;
      submitBtn.disabled = selected.size !== 4;
    }

    function renderGrid() {
      grid.innerHTML = '';
      deck.forEach((card, idx) => {
        const el = document.createElement('button');
        el.type = 'button';
        el.className = 'card';
        el.dataset.index = idx;
        el.innerHTML = `
          <div class="name">${card.name}</div>
          <div class="team">${card.team}</div>
        `;
        if (card.locked) el.classList.add('locked');
        if (selected.has(idx)) el.classList.add('selected');
        el.addEventListener('click', () => onCardClick(idx));
        grid.appendChild(el);
      });
    }

    function renderFound() {
      found.innerHTML = '';
      solvedGroups.forEach(g => {
        const row = document.createElement('div');
        row.className = 'found-row';
        row.innerHTML = `
          <div class="label">#${g.number}</div>
          <div class="chips"></div>
        `;
        const chips = row.querySelector('.chips');
        g.players.forEach(p => {
          const c = document.createElement('div');
          c.className = 'chip';
          c.textContent = `${p.name} · ${p.team}`;
          chips.appendChild(c);
        });
        found.appendChild(row);
      });
    }

    // --- Interactions -------------------------------------------------------
    function onCardClick(idx) {
      const card = deck[idx];
      if (card.locked) return;
      if (selected.has(idx)) selected.delete(idx); else selected.add(idx);
      // Cap selection at 4
      if (selected.size > 4) {
        // remove the earliest selected
        const first = selected.values().next().value;
        selected.delete(first);
      }
      updatePills();
      renderGrid();
    }

    function submitGroup() {
      if (selected.size !== 4) return;
      const indices = Array.from(selected);
      const nums = new Set(indices.map(i => deck[i].number));
      if (nums.size === 1) {
        // Correct group
        const number = [...nums][0];
        const players = indices.map(i => deck[i]);
        setBanner('good', `Correct! All wore #${number}.`);
        // lock cards & move to bottom of grid visually by keeping order but styling locked
        indices.forEach(i => deck[i].locked = true);
        solvedGroups.push({ number, players });
        // Clear selection
        selected.clear();
        // Move locked cards to the end to declutter board
        deck.sort((a, b) => (a.locked === b.locked) ? 0 : a.locked ? 1 : -1);
        updatePills();
        renderGrid();
        renderFound();
        if (solvedGroups.length === 4) {
          setBanner('', 'You solved it!');
          submitBtn.disabled = true;
        }
      } else {
        // Count how many numbers present to give a helpful hint
        const counts = {};
        indices.forEach(i => { counts[deck[i].number] = (counts[deck[i].number]||0) + 1; });
        const best = Object.values(counts).reduce((a,b) => Math.max(a,b), 0);
        const hint = best >= 3 ? 'But close—3 of these match!' : best === 2 ? 'Only 2 of these match.' : 'These don\'t look related.';
        setBanner('bad', `Not quite. ${hint}`);
        // brief shake animation
        grid.classList.add('shake');
        setTimeout(() => grid.classList.remove('shake'), 400);
      }
    }

    function resetGame() {
      selected.clear();
      solvedGroups = [];
      deck = shuffle(ALL_PLAYERS.map(p => ({ ...p })));
      deck.forEach(p => p.locked = false);
      setBanner('', 'New puzzle loaded.');
      updatePills();
      renderGrid();
      renderFound();
    }

    function shuffleBoard() {
      deck = shuffle(deck);
      renderGrid();
      setBanner('warn', 'Board is shuffled.');
    }



    // --- Startup ------------------------------------------------------------
    submitBtn.addEventListener('click', submitGroup);
    resetBtn.addEventListener('click', resetGame);
    shuffleBtn.addEventListener('click', shuffleBoard);

    // tiny CSS keyframes for shake (injected)
    const style = document.createElement('style');
    style.textContent = `@keyframes shake { 10%, 90% { transform: translateX(-2px);} 20%, 80% { transform: translateX(4px);} 30%, 50%, 70% { transform: translateX(-8px);} 40%, 60% { transform: translateX(8px);} } .shake { animation: shake .35s; }`;
    document.head.appendChild(style);

    resetGame();
  </script>
</body>
</html>
